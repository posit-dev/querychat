<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Filter and Query Data Frames in shiny Using an LLM Chat Interface • querychat</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="https://fonts.bunny.net/css?family=Open%20Sans:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&amp;display=auto" rel="stylesheet">
<link href="https://fonts.bunny.net/css?family=Hubot%20Sans:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&amp;display=auto" rel="stylesheet">
<link href="https://fonts.bunny.net/css?family=Source%20Code%20Pro:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&amp;display=auto" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Filter and Query Data Frames in shiny Using an LLM Chat Interface">
<meta name="description" content="Adds an LLM-powered chatbot to your shiny app, that can turn your users natural language questions into SQL' queries that run against your data, and return the result as a reactive data frame. Use it to drive reactive calculations, visualizations, downloads, and more.">
<meta property="og:description" content="Adds an LLM-powered chatbot to your shiny app, that can turn your users natural language questions into SQL' queries that run against your data, and return the result as a reactive data frame. Use it to drive reactive calculations, visualizations, downloads, and more.">
<meta property="og:image" content="https://posit-dev.github.io/querychat/logo.png">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">querychat</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/models.html">Models</a></li>
    <li><a class="dropdown-item" href="articles/data-sources.html">Data Sources</a></li>
    <li><a class="dropdown-item" href="articles/context.html">Provide context</a></li>
    <li><a class="dropdown-item" href="articles/build.html">Build an app</a></li>
    <li><a class="dropdown-item" href="articles/greet.html">Greet users</a></li>
    <li><a class="dropdown-item" href="articles/tools.html">Tools</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/querychat/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="querychat-">querychat 
<a class="anchor" aria-label="anchor" href="#querychat-"></a>
</h1>
</div>
<!-- badges: start -->

<p>querychat facilitates safe and reliable natural language exploration of tabular data, powered by SQL and large language models (LLMs). For users, it offers an intuitive web application where they can quickly ask questions of their data and receive verifiable data-driven answers. As a developer, you can access the chat UI component, generated SQL queries, and filtered data to build custom applications that integrate natural language querying into your data workflows.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the stable release from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"querychat"</span><span class="op">)</span></span></code></pre></div>
<p>Or the development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"posit-dev/querychat/pkg-r"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>The quickest way to start chatting with your data is via <code><a href="reference/querychat-convenience.html">querychat_app()</a></code>, which provides a fully polished Shiny app. It requires a data <a href="https://posit-dev.github.io/querychat/r/articles/data-sources.html">data source</a> (e.g., data.frame, database connection, etc.) and optionally other parameters (e.g. the LLM <code>client</code> <a href="https://posit-dev.github.io/querychat/r/articles/models.html">model</a>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://posit-dev.github.io/querychat/r/">querychat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">palmerpenguins</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/querychat-convenience.html">querychat_app</a></span><span class="op">(</span><span class="va">penguins</span>, client <span class="op">=</span> <span class="st">"openai/gpt-4.1"</span><span class="op">)</span></span></code></pre></div>
<p>Once running (which requires an API key<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;By default, querychat uses OpenAI to power the chat experience. So, for this example to work, you’ll need &lt;a href="https://platform.openai.com/" class="external-link"&gt;an OpenAI API key&lt;/a&gt;. See the &lt;a href="https://posit-dev.github.io/querychat/r/articles/models.html"&gt;Models&lt;/a&gt; article for details on how to set up credentials for other model providers.&lt;/p&gt;'><sup>1</sup></a>), you’ll notice 3 main views:</p>
<ol style="list-style-type: decimal">
<li>A sidebar chat with suggestions on where to start exploring.</li>
<li>A data table that updates to reflect filtering and sorting queries.</li>
<li>The SQL query behind the data table, for transparency and reproducibility.</li>
</ol>
<p><img src="reference/figures/quickstart.png" class="rounded shadow" alt="Screenshot of querychat's app with the penguins dataset."></p>
<p>Suppose we pick a suggestion like “Show me Adelie penguins”. Since this is a filtering operation, both the data table and SQL query update accordingly.</p>
<p><img src="reference/figures/quickstart-filter.png" class="rounded shadow" alt="Screenshot of the querychat's app with the penguins dataset filtered."></p>
<p>querychat can also handle more general questions about the data that require calculations and aggregations. For example, we can ask “What is the average bill length by species?”. The LLM will generate the SQL query to perform the calculation, querychat will execute it, and return the result in the chat:</p>
<p><img src="reference/figures/quickstart-summary.png" class="rounded shadow" alt="Screenshot of the querychat's app with a summary statistic inlined in the chat."></p>
</div>
<div class="section level2">
<h2 id="custom-apps">Custom apps<a class="anchor" aria-label="anchor" href="#custom-apps"></a>
</h2>
<p>querychat is designed to be highly extensible – it provides programmatic access to the chat interface, the filtered/sorted data frame, SQL queries, and more. This makes it easy to build custom web apps that leverage natural language interaction with your data. For example, <a href="https://github.com/posit-conf-2025/llm/blob/main/_solutions/25_querychat/25_querychat_02-end-app.R" class="external-link">here</a>’s a bespoke app for exploring Airbnb listings in Ashville, NC:</p>
<p><img src="reference/figures/airbnb.png" class="shadow rounded mb-3" alt="A custom app for exploring Airbnb listings, powered by querychat."></p>
<p>To learn more, see <a href="https://posit-dev.github.io/querychat/r/articles/build.html">Build an app</a> for a step-by-step guide.</p>
</div>
<div class="section level2">
<h2 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h2>
<p>querychat uses LLMs to translate natural language into SQL queries. Models of all sizes, from small ones you can run locally to large frontier models from major AI providers, are remarkably effective at this task. But even the best models need to understand your data’s overall structure to perform well.</p>
<p>To address this, querychat includes schema metadata – column names, types, ranges, categorical values – in the LLM’s <a href="https://posit-dev.github.io/querychat/r/articles/context.html">system prompt</a>. Importantly, querychat <strong>does not</strong> send raw data to the LLM; it shares only enough structural information for the model to generate accurate queries. When the LLM produces a query, querychat executes it in a SQL database (DuckDB<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;DuckDB is extremely fast and has a surprising number of &lt;a href="https://duckdb.org/docs/stable/sql/functions/aggregates.html#statistical-aggregates" class="external-link"&gt;statistical functions&lt;/a&gt;.&lt;/p&gt;'><sup>2</sup></a>, by default) to obtain precise results.</p>
<p>This design makes querychat reliable, safe, and reproducible:</p>
<ul>
<li>
<strong>Reliable</strong>: query results come from a real database, not LLM-generated summaries – so outputs are precise, verifiable, and less vulnerable to hallucination<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The &lt;a href="https://posit-dev.github.io/querychat/r/articles/tools.html"&gt;query tool&lt;/a&gt; gives query results to the model for context and interpretation. Thus, there is &lt;em&gt;some&lt;/em&gt; potential that the model to mis-interpret those results.&lt;/p&gt;'><sup>3</sup></a>.</li>
<li>
<strong>Safe</strong>: querychat’s tools are read-only by design, avoiding destructive actions on your data.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;To fully guarantee no destructive actions on your production database, ensure querychat’s database permissions are read-only.&lt;/p&gt;"><sup>4</sup></a>
</li>
<li>
<strong>Reproducible</strong>: generated SQL can be exported and re-run in other environments, so your analysis isn’t locked into a single tool.</li>
</ul>
<div class="alert alert-warning">
<p><strong>Data privacy</strong></p>
<p>See the <a href="https://posit-dev.github.io/querychat/r/articles/context.html">Provide context</a> and <a href="https://posit-dev.github.io/querychat/r/articles/tools.html">Tools</a> articles for more details on exactly what information is provided to the LLM and how customize it.</p>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>From here, you might want to learn more about:</p>
<ul>
<li>
<a href="https://posit-dev.github.io/querychat/r/articles/models.html">Models</a>: customize the LLM behind querychat.</li>
<li>
<a href="https://posit-dev.github.io/querychat/r/articles/data-sources.html">Data sources</a>: different data sources you can use with querychat.</li>
<li>
<a href="https://posit-dev.github.io/querychat/r/articles/context.html">Provide context</a>: provide the LLM with the context it needs to work well.</li>
<li>
<a href="https://posit-dev.github.io/querychat/r/articles/build.html">Build an app</a>: design a custom Shiny app around querychat.</li>
<li>
<a href="https://posit-dev.github.io/querychat/r/articles/greet.html">Greet users</a>: create welcoming onboarding experiences.</li>
<li>
<a href="https://posit-dev.github.io/querychat/r/articles/tools.html">Tools</a>: understand what querychat can do under the hood.</li>
</ul>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=querychat" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/posit-dev/querychat/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/posit-dev/querychat/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing querychat</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7111-0077" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://github.com/jcheng5" class="external-link">Joe Cheng</a> <br><small class="roles"> Author, conceptor </small>   </li>
<li>
<a href="https://cpsievert.me" class="external-link">Carson Sievert</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4958-2844" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a> <br><small class="roles"> Copyright holder, funder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/posit-dev/querychat/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/posit-dev/querychat/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=querychat" class="external-link"><img src="https://www.r-pkg.org/badges/version/querychat" alt="CRAN status"></a></li>
<li><a href="https://posit-dev.r-universe.dev/querychat" class="external-link"><img src="https://posit-dev.r-universe.dev/querychat/badges/version" alt="querychat status badge"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="https://github.com/jcheng5" class="external-link">Joe Cheng</a>, <a href="https://cpsievert.me" class="external-link">Carson Sievert</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
